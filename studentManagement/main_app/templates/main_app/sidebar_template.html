{% load static %}
<style>
    /* Sidebar General */
    .main-sidebar {
        font-family: 'Poppins', sans-serif;
    }

    /* Gradients per role */
    .sidebar-admin { background: linear-gradient(180deg, #e94245ff, #f53434ff); }
    .sidebar-staff { background: linear-gradient(180deg, #064e3b, #065f46); }
    .sidebar-student { background: linear-gradient(180deg, #056a25ff, #18e937ff); }

    /* Brand text */
    .brand-text {
        font-weight: 600;
        font-size: 1.2rem;
        color: #0e1011ff !important;
    }

    /* User panel */
    .user-panel .info a {
        font-size: 1rem;
        font-weight: 500;
        color: #dfe3e8ff !important;
    }

    /* Nav links */
    .nav-link {
        font-size: 0.95rem;
        color: #050607ff !important;
        transition: all 0.2s ease-in-out;
        border-radius: 8px;
        margin: 2px 0;
    }
    .nav-link:hover {
        background: rgba(255,255,255,0.15) !important;
        color: #fff !important;
        transform: translateX(4px);
    }
    .nav-link.active {
        background: rgba(255,255,255,0.25) !important;
        color: #fff !important;
        font-weight: 600;
    }

    /* Icons */
    .nav-icon { color: #050505ff !important; margin-right: 6px; }
    .nav-link.active .nav-icon,
    .nav-link:hover .nav-icon { color: #ffffff !important; }
</style>

<aside class="main-sidebar 
{% if request.user.user_type == '1' %} sidebar-admin 
{% elif request.user.user_type == '2' %} sidebar-staff 
{% else %} sidebar-student {% endif %} elevation-4">

    <!-- Brand -->
    <a href="{% if request.user.user_type == '1' %}{% url 'admin_home' %}{% elif request.user.user_type == '2' %}{% url 'staff_home' %}{% else %}{% url 'student_home' %}{% endif %}" 
       class="brand-link">
        <img src="{% static 'dist/img/AdminLTELogo.png' %}" alt="Logo"
             class="brand-image img-circle elevation-3" style="opacity: .8">
        <span class="brand-text">
            {% if request.user.user_type == '1' %}Admin Panel{% elif request.user.user_type == '2' %}Staff Panel{% else %}Student Panel{% endif %}
        </span>
    </a>

    <div class="sidebar">
        <!-- User Info -->
        <div class="user-panel mt-3 pb-3 mb-3 d-flex">
            <div class="image">
                <img src="{{ request.user.profile_pic }}" class="img-circle elevation-2" alt="User Image">
            </div>
            <div class="info">
                <a href="#" class="d-block">{{ user }}</a>
            </div>
        </div>

        <!-- Menu -->
        <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column" role="menu">

                {% if request.user.user_type == '1' %}
                <!-- Admin Menu -->
                <li class="nav-item">
                    <a href="{% url 'admin_home' %}" class="nav-link {% if request.path == '/admin_home/' %}active{% endif %}">
                        <i class="nav-icon fas fa-th"></i><p>Home</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'admin_view_profile' %}" class="nav-link {% if request.path == '/admin_view_profile/' %}active{% endif %}">
                        <i class="nav-icon fas fa-user"></i><p>View/Edit Profile</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'admin_notify_staff' %}" class="nav-link {% if request.path == '/admin_notify_staff/' %}active{% endif %}">
                        <i class="nav-icon fas fa-bell"></i><p>Notify Staff</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'admin_notify_student' %}" class="nav-link {% if request.path == '/admin_notify_student/' %}active{% endif %}">
                        <i class="nav-icon fas fa-bell"></i><p>Notify Student</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'add_staff' %}" class="nav-link {% if request.path == '/add_staff/' %}active{% endif %}">
                        <i class="nav-icon fas fa-user-plus"></i><p>Add Staff</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'manage_staff' %}" class="nav-link {% if request.path == '/manage_staff/' %}active{% endif %}">
                        <i class="nav-icon fas fa-users"></i><p>Manage Staff</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'add_student' %}" class="nav-link {% if request.path == '/add_student/' %}active{% endif %}">
                        <i class="nav-icon fas fa-user-graduate"></i><p>Add Student</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'manage_student' %}" class="nav-link {% if request.path == '/manage_student/' %}active{% endif %}">
                        <i class="nav-icon fas fa-users"></i><p>Manage Student</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'add_course' %}" class="nav-link {% if request.path == '/add_course/' %}active{% endif %}">
                        <i class="nav-icon fas fa-book"></i><p>Add Course</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'manage_course' %}" class="nav-link {% if request.path == '/manage_course/' %}active{% endif %}">
                        <i class="nav-icon fas fa-book-reader"></i><p>Manage Course</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'add_subject' %}" class="nav-link {% if request.path == '/add_subject/' %}active{% endif %}">
                        <i class="nav-icon fas fa-book-open"></i><p>Add Subject</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'manage_subject' %}" class="nav-link {% if request.path == '/manage_subject/' %}active{% endif %}">
                        <i class="nav-icon fas fa-tasks"></i><p>Manage Subject</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'add_session' %}" class="nav-link {% if request.path == '/add_session/' %}active{% endif %}">
                        <i class="nav-icon fas fa-calendar-plus"></i><p>Add Session</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'manage_session' %}" class="nav-link {% if request.path == '/manage_session/' %}active{% endif %}">
                        <i class="nav-icon fas fa-calendar-alt"></i><p>Manage Session</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'admin_view_attendance' %}" class="nav-link {% if request.path == '/admin_view_attendance/' %}active{% endif %}">
                        <i class="nav-icon fas fa-clipboard-list"></i><p>View Attendance</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'student_feedback_message' %}" class="nav-link {% if request.path == '/student_feedback_message/' %}active{% endif %}">
                        <i class="nav-icon fas fa-comments"></i><p>Student Feedback</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'staff_feedback_message' %}" class="nav-link {% if request.path == '/staff_feedback_message/' %}active{% endif %}">
                        <i class="nav-icon fas fa-comment-dots"></i><p>Staff Feedback</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'view_staff_leave' %}" class="nav-link {% if request.path == '/view_staff_leave/' %}active{% endif %}">
                        <i class="nav-icon fas fa-briefcase"></i><p>Staff Leave</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'view_student_leave' %}" class="nav-link {% if request.path == '/view_student_leave/' %}active{% endif %}">
                        <i class="nav-icon fas fa-user-clock"></i><p>Student Leave</p>
                    </a>
                </li>

                {% elif request.user.user_type == '2' %}
                <!-- Staff Menu -->
                <li class="nav-item">
                    <a href="{% url 'staff_home' %}" class="nav-link {% if request.path == '/staff_home/' %}active{% endif %}">
                        <i class="nav-icon fas fa-th"></i><p>Home</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'staff_view_profile' %}" class="nav-link {% if request.path == '/staff_view_profile/' %}active{% endif %}">
                        <i class="nav-icon fas fa-user"></i><p>View/Edit Profile</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'staff_add_result' %}" class="nav-link {% if request.path == '/staff_add_result/' %}active{% endif %}">
                        <i class="nav-icon fas fa-plus"></i><p>Add Result</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'edit_student_result' %}" class="nav-link {% if request.path == '/edit_student_result/' %}active{% endif %}">
                        <i class="nav-icon fas fa-edit"></i><p>Edit Result</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'staff_take_attendance' %}" class="nav-link {% if request.path == '/staff_take_attendance/' %}active{% endif %}">
                        <i class="nav-icon fas fa-check-square"></i><p>Take Attendance</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'staff_update_attendance' %}" class="nav-link {% if request.path == '/staff_update_attendance/' %}active{% endif %}">
                        <i class="nav-icon fas fa-sync-alt"></i><p>View/Update Attendance</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'staff_view_notification' %}" class="nav-link {% if request.path == '/staff_view_notification/' %}active{% endif %}">
                        <i class="nav-icon fas fa-bell"></i><p>View Notifications</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'staff_apply_leave' %}" class="nav-link {% if request.path == '/staff_apply_leave/' %}active{% endif %}">
                        <i class="nav-icon fas fa-plane"></i><p>Apply For Leave</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'staff_feedback' %}" class="nav-link {% if request.path == '/staff_feedback/' %}active{% endif %}">
                        <i class="nav-icon fas fa-comment"></i><p>Feedback</p>
                    </a>
                </li>

                {% else %}
                <!-- Student Menu -->
                <li class="nav-item">
                    <a href="{% url 'student_home' %}" class="nav-link {% if request.path == '/student_home/' %}active{% endif %}">
                        <i class="nav-icon fas fa-home"></i><p>Home</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'student_view_profile' %}" class="nav-link {% if request.path == '/student_view_profile/' %}active{% endif %}">
                        <i class="nav-icon fas fa-user"></i><p>View/Edit Profile</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'student_view_result' %}" class="nav-link {% if request.path == '/student_view_result/' %}active{% endif %}">
                        <i class="nav-icon fas fa-poll"></i><p>View Results</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'student_view_attendance' %}" class="nav-link {% if request.path == '/student_view_attendance/' %}active{% endif %}">
                        <i class="nav-icon fas fa-clipboard-check"></i><p>View Attendance</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'student_view_notification' %}" class="nav-link {% if request.path == '/student_view_notification/' %}active{% endif %}">
                        <i class="nav-icon fas fa-bell"></i><p>View Notifications</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'student_apply_leave' %}" class="nav-link {% if request.path == '/student_apply_leave/' %}active{% endif %}">
                        <i class="nav-icon fas fa-plane"></i><p>Apply For Leave</p>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'student_feedback' %}" class="nav-link {% if request.path == '/student_feedback/' %}active{% endif %}">
                        <i class="nav-icon fas fa-comment"></i><p>Feedback</p>
                    </a>
                </li>
                {% endif %}

                <!-- Logout -->
                <li class="nav-item">
                    <a href="{% url 'user_logout' %}" onclick="return confirm('Your session will be terminated.\nProceed?')" class="nav-link">
                        <i class="nav-icon fas fa-sign-out-alt"></i><p>Logout</p>
                    </a>
                </li>

            </ul>
        </nav>
    </div>
</aside>
